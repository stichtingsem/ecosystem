openapi: 3.0.0
info:
  title: Progress API
  version: '1.3.0'
  description: |-
    This API defines progress about specific learning materials (assignable Units) in the course to report to the LMS. Main goal is to inform teachers on progress (which activities are completed) and possible indication that the activity was completed, but needs attention of the teacher. 

    Progress is reported on the Learning materials of the LA on the level of Assignable Units within a Course in the Course API. 
    Progress is reported when an activity is started or completed, not while the activity is in progress. If the activity is adaptive and will take more time for one student due to adaptive levels, that is not reported.

    Activities have a life cycle of not-started, started, completed. The not started is the default and will not be reported, unless (for some reason) the status goes back to not-started. The abandoned state is to indicate that the activity was started, but will never be completed (optional).

    The API does not force the LA to use a standard for the indication about the quality of the progress. It is optional to indicate a signal and/or pleaseFollowUp to the LMS. This provides the LA a way to tell the Teacher via the LMS that the progress was not standard and the Teacher is advised to have a look at the LA's dashboard (with a direct url). A LA can provide any scale (1-10, average, good, bad) by adding this as text. The LMS should not try to combine these indications for a complete chapter or paragraph.

    Normally this progress is send as events. When the consent flow is completed and both LA and LMS have consent the events are send. 

    In the progress statement the LA can add the Course information, so the LMS can use that information to efficiently process the events.

    ## Events
    Events generated by the Progress API are:
     - `la.simpleprogress` - send from the LA to the LMS preferably near realtime so the LMS can show progress for teachers.  

    ## Scopes
    - `la.progress` - scope needed to send progress events from la to lms
    
    ## Consent
    Consent is required from the School to receive SimpleProgress Events as a LMS.
    
  contact:
    name: Stichting SEM
    url: 'https://stichtingsem.org/'
servers:
  - url: 'https://example.stichtingsem.org/api'
    description: progress
components:
  schemas:
    
    schemaVersion:
      type: string
      description: 'Schema version of this event/object using semantic versioning 2.0.0'
      default: 1.3.0
    
    SimpleProgress:
      title: SimpleProgress
      type: object
      x-tags:
        - Progress
      x-examples:
        example-1:
          id: '123-bigstring-or-guid-does-not-matter-but-unique-for-this-progress-statement'
          schemaVersion: 0
          eckId: 'eck1'
          assignableUnitId: '1234566'
          courseId: 'english-22-high'
          status: 'completed'
          timestamp: '2017-07-21T17:32:28Z'
          additionalInfo: ':)'
          detailsUrl: 'https://course.publisher.com/analysis/1234566/eck1'
          pleaseFollowUp: False
      description: 'The SimpleProgress Event that is send by the LA to the LMS to report progress on an Assignable Unit in a Course by a specific Student.'
      properties:
        id:
          type: string
          description: Unique id
        schemaVersion:
          $ref: '#/components/schemas/schemaVersion'
        eckId:
          type: string
          description: |-
            The ECK-ID of the Student for which the progress is reported.
            (either eckId or userId is required)
        userId:
          type: array
          description: |
            The User ID(s) of the Student for which the progress is reported.
            (either eckId, userId is required)
          items:
            type: object
            properties:
              userId:
                type: string
              userIdType:
                type: string
                enum:
                  - nlPersonProfileId
                  - nlPersonRealId
                  - Las-key
                  - Leerlingnummer
            required:
              - userId
              - userIdType
        assignableUnitId:
          type: string
          description: 'Assignable Unit for which progress is reported. This is strongly linked to an identifier of an Assignable Unit in the CourseStructure object in the Course API.'
        courseId:
          type: string
          description: 'Optional identifier of the CourseStructure where the Assignable Unit belongs to.'
        status:
          type: string
          description: 'New status of the activity of the Student regarding the Learning Material.'
          enum:
            - not-started
            - started
            - completed
            - abandoned
        timestamp:
          type: string
          format: date-time
          description: |
            Timestamp of the activity that lead to the Event.
            Format: Conform openapi in ZULU time zoals gespecificeerd in RFC 3339, section 5.6
        additionalInfo:
          type: string
          description: |-
            Additional signal to show to teachers about this progress. This could be a signal that all is fine, or that the activity was finished, but not successful or with so much effort that the teacher is advised that to look at the LA systems dashboards. 
            field is free format, bust should be very short. eg "good","average", single digit, smileys, "!" (also see detailsUrl)
          maxLength: 15
          example: ':)'
        detailsUrl:
          type: string
          description: 'Deeplink to the page of the LA where a teacher can get details on this progress event.'
        pleaseFollowup:
          type: boolean
          default: False
          description: |-
            Boolean to indicate that the additional info and detailsUrl are provided as an invite to have a closer look at this progress.
            This can be used by the LMS to show a list of signals that the teacher should followup
      required:
        - id
        - schemaVersion
        - assignableUnitId
        - courseId
        - status
        - timestamp
  
  securitySchemes:
    OAuth2:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: ''
          refreshUrl: ''
          scopes:
            la.progress: scope to send progress events to an LMS

x-tags:
  - name: Progress
